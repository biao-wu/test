{"version":3,"sources":["component/Water/index.js","api/index.js","api/request.js"],"names":["Water","state","nowData","dataList","dataX","pH","NTU","oxygen","tem","ele","myChart","echarts","init","document","getElementById","getWater","then","res","console","log","data","forEach","item","item1","time","split","push","slice","setState","Object","keys","setOption","title","text","tooltip","trigger","legend","grid","left","right","bottom","containLabel","toolbox","feature","saveAsImage","xAxis","type","boundaryGap","yAxis","series","name","style","textAlign","fontSize","this","id","width","height","Component","service","axios","create","baseURL","timeout","interceptors","request","use","config","sessionStorage","getItem","headers","response","status","msg","removeItem","clear","window","location","href","login","pwd","method","url","getLogs","page","count","params","getAllLogs","getAdminInfo","updataInfo","updataPwd","up","file","addShare","findSharePage","findShareAll","addDev","getDevList","getAllDevList","updataDev","getAdminLogs","getAdminAllLogs","addAdmin","delDev","devNum"],"mappings":"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","file":"static/js/27.fe546ed8.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport echarts from \"echarts\"\nimport { getWater} from \"../../api/request\"\nexport default class Water extends Component {\n    constructor(){\n        super()\n        this.state={\n            nowData:\"\",\n            dataList:[],\n            dataX:[],\n            pH:[],\n            NTU:[],\n            oxygen:[],\n            tem:[],\n            ele:[]\n        }\n    }\n    componentDidMount(){\n        // 基于准备好的dom，初始化echarts实例\n        const myChart = echarts.init(document.getElementById('main'));\n        getWater().then(res=>{\n            console.log(res);\n            res.data.forEach(item => {\n                let item1=item.time.split(\"T\")\n                //当前日期  如三月十四号\n                this.state.nowData=item1[0]\n                //时间小时:分\n                this.state.dataX.push(item1[1].slice(0,5))\n                //pH\n                this.state.pH.push(item.pH)\n                //浑浊度\n                this.state.NTU.push(item.NTU)\n                //溶解氧\n                this.state.oxygen.push(item.oxygen)\n                //水温\n                this.state.tem.push(item.tem)\n                //电导率\n                this.state.ele.push(item.ele)\n            })\n            this.setState({\n                dataList : Object.keys(res.data[0])\n            })\n            // 绘制图表\n           \n            myChart.setOption({\n                title: {\n                    text: '水质参数'\n                },\n                tooltip: {\n                    trigger: 'axis'\n                },\n                legend: {\n                    //哪些曲线\n                    data: this.dataList\n                },\n                grid: {\n                    left: '3%',\n                    right: '4%',\n                    bottom: '3%',\n                    containLabel: true\n                },\n                toolbox: {\n                    feature: {\n                        saveAsImage: {}\n                    }\n                },\n                xAxis: {\n                    type: 'category',\n                    boundaryGap: false,\n                    data: this.state.dataX\n                },\n                yAxis: {\n                    type: 'value'\n                },\n                series: [\n                    {\n                        name: \"pH值\",\n                        type: 'line',\n                        data: this.state.pH\n                    },\n                    {\n                        name: \"浑浊度\",\n                        type: 'line',\n                        data: this.state.NTU\n                    },\n                    {\n                        name: \"溶解氧\",\n                        type: 'line',\n                        data: this.state.oxygen\n                    },\n                    {\n                        name: \"温度\",\n                        type: 'line',\n                        data: this.state.tem\n                    },\n                    {\n                        name: \"电导率\",\n                        type: 'line',\n                        data: this.state.ele\n                    }\n                ]\n            });\n        })  \n    }\n    render() {\n        return (\n           <div>\n                <h1 style={{textAlign:\"center\",fontSize:\"26px\"}}>{this.state.nowData}</h1>\n                <div id=\"main\" style={{width: \"1000px\",height:\"520px\"}}></div>\n                \n           </div>\n        )\n    }\n}\n","import axios from \"axios\"\n\nvar service=axios.create({\n    baseURL:\"/api\",\n    \"content-type\":\"application/json\",\n    timeout:5000\n})\nservice.interceptors.request.use((config)=>{\n    if(sessionStorage.getItem(\"token\")){\n        config.headers[\"authorization\"]=sessionStorage.getItem(\"token\")\n    }\n    return config;\n})\nservice.interceptors.response.use(res=>{\n    if (res.data.status === 0 && res.data.msg === \"校验失败\"){        \n        sessionStorage.removeItem(\"name\")\n        sessionStorage.clear()\n        window.location.href=\"/login\"\n    }\n    return res    \n})\nexport default service","import axios from \"./index.js\"\n\n//登录\nexport const login =(name,pwd)=>axios({\n    method:\"post\",\n    url:\"/users/login\",\n    data: { name, pwd}\n})\n\n//获取登录日志\nexport const getLogs=(name,page,count)=>axios({\n    url:\"/getlogs\",\n    params: { name, page, count}\n})\n\n//获取所有(单个人)登录日志\nexport const getAllLogs = (name) => axios({\n    url: \"/getlogs/all\",\n    params: { name}\n})\n\n//获取管理员基本信息\nexport const getAdminInfo=(name)=>axios({\n    url: \"/users/find\",\n    params: { name }\n})\n\n//修改个人基本信息\nexport const updataInfo=(data)=>axios({\n    method: \"post\",\n    url:\"/users/updata\",\n    data\n})\n\n//修改个人密码\nexport const updataPwd=(data)=>axios({\n    method: \"post\",\n    url:\"/users/uppwd\",\n    data\n})\n\n//上传头像\nexport const up=(file)=>axios({\n    method:\"post\",\n    url:\"/share/upload\",\n    data:file\n})\n\n//添加共享信息\nexport const addShare = (data) => axios({\n    method: \"post\",\n    url: \"/share/add\",\n    data\n})\n\n//查询共享信息(分页)\nexport const findSharePage = (data) => axios({\n    method: \"post\",\n    url: \"/share/contentpage\",\n    data\n})\n\n//查询共享信息(不分页,全部信息)\nexport const findShareAll = (name) => axios({\n    method: \"post\",\n    url: \"/share/contentall\",\n    data:{\n        name\n    }\n})\n\n//添加设备信息\nexport const addDev = (data) => axios({\n    method: \"post\",\n    url: \"/dev/adddev\",\n    data\n})\n\n//获取设备信息(分页)\nexport const getDevList=(data)=>axios({\n    method:\"post\",\n    url:\"/dev/finddev\",\n    data\n})\n\n//获取设备信息   总数\nexport const getAllDevList=()=>axios({\n    method:\"post\",\n    url:\"/dev/findalldev\"\n})\n\n//修改设备信息 \nexport const updataDev = (data)=>axios({\n    method:\"post\",\n    url:\"/dev/updatedev\",\n    data\n})\n\n//获取管理员操作日志 (分页) name可传可不传\nexport const getAdminLogs = (params)=>axios({\n    url:\"/adminlogs\",\n    params\n})\n\n//获取管理员操作日志 全部 name可传可不传\nexport const getAdminAllLogs = (data)=>axios({\n    method: \"post\",\n    url:\"/adminlogs/all\",\n    data\n})\n\n//获取水质信息  mySQL\nexport const getWater = () => axios({\n    url: \"/aliyun\",\n})\n\n//root账户  添加账户\nexport const addAdmin = (data)=>axios({\n    method: \"post\",\n    url: \"/users/regist\",\n    data\n})\n\n//root账户  删除设备\nexport const delDev = (devNum)=>axios({\n    method: \"post\",\n    url: \"/dev/dltdev\",\n    data: { devNum}\n})"],"sourceRoot":""}